# SPDX-License-Identifier: MIT
---
# ansible_facts required by the role
__hpc_required_facts:
  - distribution
  - distribution_major_version
  - distribution_version
  - os_family
  # required for ansible_system_vendor
  - devices
  # required for ansible_processor_nproc
  - processor
# the subsets of ansible_facts that need to be gathered in case any of the
# facts in required_facts is missing; see the documentation of
# the 'gather_subset' parameter of the 'setup' module
__hpc_required_facts_subsets: "{{ ['!all', '!min'] +
  __hpc_required_facts }}"

__hpc_microsoft_prod_rpm_key: https://packages.microsoft.com/keys/microsoft.asc
__hpc_dkms_packages:
  - dkms
__hpc_nvidia_driver_packages:
  - nvidia-driver
__hpc_cuda_driver_packages:
  - cuda-drivers
__hpc_nvidia_fabric_manager_packages:
  - nvidia-fabric-manager
__hpc_rdma_packages:
  - rdma-core
  - rdma-core-devel
  - libibverbs
  - libibverbs-utils
  - libibverbs-devel
  - librdmacm-utils
  - perftest
  - ucx
  - ucx-ib
  - ucx-rdmacm
  - WALinuxAgent
  - infiniband-diags
  - pciutils-devel
__hpc_system_openmpi_packages:
  - openmpi
__hpc_openmpi_common_packages:
  # This is required to run openmpi tests, useful both for QE and end users
  - mpitests-openmpi
  # Lmod is required to enable openmpi module with pmix
  - Lmod
  # numactl-devel is required for OpenMPI GPU otherwise it throws a warning
  # libnuma.so: cannot open shared object file: No such file or directory
  - numactl-devel
__hpc_gdrcopy_build_dependencies:
  - rpm-build
  - rpmdevtools
__hpc_pmix_build_dependencies:
  - hwloc-devel
  - libevent-devel
__hpc_openmpi_build_dependencies:
  - binutils-devel
  - autoconf
  - automake
  - libtool
__hpc_versionlock_path: /etc/dnf/plugins/versionlock.list
__hpc_kernel_versionlock_rpms:
  - kernel
  - kernel-core
  - kernel-modules
  - kernel-modules-extra
  - kernel-devel
  - kernel-headers
__hpc_install_prefix: /opt

__hpc_module_dir: /usr/share/modulefiles

# A variable for testing purposes to force a specific kernel version to be installed
__hpc_force_kernel_version: null

# BEGIN - DO NOT EDIT THIS BLOCK - rh distros variables
# Ansible distribution identifiers that the role treats like RHEL
__hpc_rh_distros:
  - AlmaLinux
  - CentOS
  - RedHat
  - Rocky

# Same as above but includes Fedora
__hpc_rh_distros_fedora: "{{ __hpc_rh_distros + ['Fedora'] }}"

# Use this in conditionals to check if distro is Red Hat or clone
__hpc_is_rh_distro: "{{ ansible_distribution in __hpc_rh_distros }}"

# Use this in conditionals to check if distro is Red Hat or clone, or Fedora
__hpc_is_rh_distro_fedora: "{{ ansible_distribution in __hpc_rh_distros_fedora }}"
# END - DO NOT EDIT THIS BLOCK - rh distros variables
