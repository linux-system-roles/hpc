# SPDX-License-Identifier: MIT
---
# ansible_facts required by the role
__hpc_required_facts:
  - distribution
  - distribution_major_version
  - distribution_version
  - os_family
  # required for ansible_facts["system_vendor"]
  - devices
  # required for ansible_facts["processor_nproc"]
  - processor
# the subsets of ansible_facts that need to be gathered in case any of the
# facts in required_facts is missing; see the documentation of
# the 'gather_subset' parameter of the 'setup' module
__hpc_required_facts_subsets: "{{ ['!all', '!min'] +
  __hpc_required_facts }}"

__hpc_microsoft_prod_rpm_key: https://packages.microsoft.com/keys/microsoft.asc

__hpc_base_packages:
  - pssh

__hpc_rdma_rename_path: /usr/lib/udev/rdma_rename

__hpc_dkms_packages:
  - dkms
__hpc_nvidia_driver_packages:
  - nvidia-driver
__hpc_cuda_driver_packages:
  - cuda-drivers
__hpc_nvidia_fabric_manager_packages:
  - nvidia-fabric-manager
__hpc_nvidia_container_toolkit_packages:
  - nvidia-container-toolkit
__hpc_rdma_packages:
  # Base RDMA stack + tools
  - rdma-core
  - rdma-core-devel
  - libibverbs
  - libibverbs-utils
  - libibverbs-devel
  - librdmacm-utils
  - perftest
  - ucx
  - ucx-ib
  - ucx-rdmacm
  - infiniband-diags
  - pciutils-devel
__hpc_system_openmpi_packages:
  - openmpi
__hpc_openmpi_common_packages:
  # This is required to run openmpi tests, useful both for QE and end users
  - mpitests-openmpi
  # Lmod is required to enable openmpi module with pmix
  - Lmod
  # numactl-devel is required for OpenMPI GPU otherwise it throws a warning
  # libnuma.so: cannot open shared object file: No such file or directory
  - numactl-devel
__hpc_gdrcopy_build_dependencies:
  - rpm-build
  - rpmdevtools
__hpc_pmix_build_dependencies:
  - hwloc-devel
  - libevent-devel
__hpc_openmpi_build_dependencies:
  - binutils-devel
  - autoconf
  - automake
  - libtool
__hpc_versionlock_path: /etc/dnf/plugins/versionlock.list
__hpc_kernel_versionlock_rpms:
  - kernel
  - kernel-core
  - kernel-modules
  - kernel-modules-extra
  - kernel-devel
  - kernel-devel-matched
  - kernel-headers
__hpc_azure_diagnostics_packages:
  # lsvmbus is required by the diagnostics script, but is provided by the azure
  # RHEL 9.6 base image. Testing is often done on other base images (e.g.
  # ansible system role CI) so this comment is a reminder that we may need to
  # add this package as a hard dependency in future.
  - hyperv-tools
  - patch

__hpc_install_prefix: /opt

# packages for azure specific including VM management infrastructure and storage
# utilities. These are always installed on azure platform
__hpc_azure_packages:
  - WALinuxAgent
  - aznfs

# location for azure specific scripts and resources
__hpc_azure_resource_dir: "{{ __hpc_install_prefix }}/hpc/azure"
__hpc_azure_tools_dir: "{{ __hpc_azure_resource_dir }}/tools"
__hpc_azure_tests_dir: "{{ __hpc_azure_resource_dir }}/tests"
__hpc_azure_moneo_dir: "{{ __hpc_azure_tools_dir }}/Moneo"

# location for runtime selected azure resources
__hpc_azure_runtime_dir: /var/hpc/azure

__hpc_module_dir: /usr/share/modulefiles

# A variable for testing purposes to force a specific kernel version to be installed
__hpc_force_kernel_version: null

# BEGIN - DO NOT EDIT THIS BLOCK - rh distros variables
# Ansible distribution identifiers that the role treats like RHEL
__hpc_rh_distros:
  - AlmaLinux
  - CentOS
  - RedHat
  - Rocky

# Same as above but includes Fedora
__hpc_rh_distros_fedora: "{{ __hpc_rh_distros + ['Fedora'] }}"

# Use this in conditionals to check if distro is Red Hat or clone
__hpc_is_rh_distro: "{{ ansible_facts['distribution'] in __hpc_rh_distros }}"

# Use this in conditionals to check if distro is Red Hat or clone, or Fedora
__hpc_is_rh_distro_fedora: "{{ ansible_facts['distribution'] in __hpc_rh_distros_fedora }}"
# END - DO NOT EDIT THIS BLOCK - rh distros variables
